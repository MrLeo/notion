<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>一个基于 Github Issue 和 Preact 开发的评论插件</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" />
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  </head>

  <body>
    <div id="gitalk-container"></div>
    <script>
      // Gitalk: https://github.com/gitalk/gitalk/blob/master/readme-cn.md
      // GitHub Application: https://github.com/settings/applications/1834304
      var gitalk = new Gitalk({
        clientID: '0afc389cd39b1eeb3ed1',
        clientSecret: 'da9470d49bba1481dffd09977f08351137223e94',
        repo: 'notion',
        owner: 'MrLeo',
        admin: ['MrLeo'],
        id: getParentUrl(), // Ensure uniqueness and length less than 50
        distractionFreeMode: true, // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

      try {
        console.info('[Gitalk] -> parent', getParentUrl())
      } catch (error) {
        console.error('[Gitalk] -> parent', error)
      }

      function getParentUrl() {
        var url = null
        if (parent !== window) {
          try {
            url = parent.location.href
          } catch (e) {
            url = document.referrer
          }
        }
        return url
      }
    </script>
  </body>
</html>
